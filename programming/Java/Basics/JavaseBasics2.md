# Java基础2 - 注释、变量、常量、运算符、数据类型

参考资料：

> [慕课网2019Java就业班-Java 零基础入门](https://class.imooc.com/sc/64)
>
> 书籍：Java核心卷1(原书第10版)
>
> [菜鸟教程](https://www.runoob.com/java/java-basic-datatypes.html)

为了方便我们后续的学习，在本章中，我们将对Java以及编程的一些基本组成单元进行讲解，本章内容不仅适用于Java且绝大多数编程语言共有。

## 注释

在程序员阅读代码的时候，为了方便理解，通常需要对代码功能结构、关键函数等信息进行文字备注，而这一部分的代码不会也不能出现在可执行程序中，而程序也不必担心这一部分代码在编译完成后导致可执行膨胀，这部分内容叫做注释

Java的注释有三种

```java
//双斜杠注释，从注释处到行结尾
```

```Java
/*多行注释
被包裹内容全部注释*/
```

```Java
/**
文档注释,多行注释的基础上，会自动生成备注文档，后续会进行讲解
*/
```

值得注意的是：注释内容是不允许嵌套的。

## 数据类型

Java是一种强类型的语言，每一个量的使用之前，都需要声明类型以便分配对应大小的内存空间用于存放这个量的值，而数据类型的不同决定着这个空间大小的不同。

Java中有4种整型、2种浮点类型、1种用于表达Unicode编码的字符类型char以及1种用于表示真假值的boolean类型。

### 基本数据类型

#### 整型

整型用于表示没有小数部分的数值，它可以为负数，Java种提供了四种整形。

| Java整型 |          |                                                      |        |
| -------- | :------: | :--------------------------------------------------- | ------ |
| 类型     | 存储需求 | 取值范围                                             | 默认值 |
| byte     |  1字节   | -128~127                                             | 0      |
| short    |  2字节   | -32768~32767                                         | 0      |
| int      |  4字节   | -2,147,483,648~2,147,483,647                         | 0      |
| long     |  8字节   | -9,223,372,036,854,775,808~9,223,372,036,854,775,807 | 0L     |

通常，int是最常用的整型类型，long用于特大数字例如地球上居住人数，byte和short通常用于需要严格控制储存空间大小的情况。

> Java程序由于必须要保证在所有机器上都能得到相同的运行结果，所以在Java中，各种数据类型的范围与运行程序的机器无关，这一点与C\C++有区别
>
> 注意：Java没有任何无符号形势的整型类型

##### 字面值

在计算机的世界里，除了最常用的十进制以外，还有二进制八进制十六进制也比较常见，而我们在赋值的时候需要对不同的进制数进行区分

| 字面值   |            |          |
| -------- | ---------- | -------- |
| 进制     | 字面值符号 | 例子     |
| 十进制   |            | 12,13,48 |
| 二进制   | 0b         | 0b1001   |
| 八进制   | 0          | 037      |
| 十六进制 | 0x         | 0XABCD   |

#### 浮点类型

浮点类型用于表示有小数部分的数值

| Java浮点数 |          |                   |        |
| ---------- | -------- | ----------------- | ------ |
| 类型       | 存储需求 | 取值范围          | 默认值 |
| float      | 4字节    | 大约小数点后6-7位 | 0.0f   |
| double     | 8字节    | 大约小数点后15位  | 0.0d   |

double表示这种类型的数值精度是float的两倍，所以也有人叫他为双精度类型，在使用赋值的时候，float值需要在后面加一个f或者F,例如：3.14f，如果不加，则会被计算机默认为double类型

> 所有浮点数值的计算都遵循[IEEE754](https://baike.baidu.com/item/IEEE%20754/3869922?fromtitle=IEEE754%E6%A0%87%E5%87%86&fromid=10427270&fr=aladdin)规范
>
> 简单来说，表示溢出、出错的情况有三个特殊的浮点值：
>
> - 正无穷
>
> - 负无穷
>
> - NaN
>
>   例如：一个正整数除以0结果为正无穷，计算0/0或负数平方根为NaN

注意：由于浮点数精确度问题，所以它并不适合无法接受舍入误差的金融计算中，如果数值无法接受任何的舍入误差，请使用BigDecimal类

#### char类型

char类型表示单个字符

char类型的字面值要用单引号括起来

> 拓展阅读：[Unicode和char类型](./other/Java/unicode和char类型)

#### boolean类型

boolean类型只有两个值：false和true，通常用于判断逻辑条件，且，整型值和布尔值之间不能进行相互转换

> 为什么没有字符串？
>
> String 表示的是字符串对象，Java 中将字符串作为对象处理，而不是基本数据类型。在基本数据类型中，与String  比较相似的是字符类型（char），该类型变量只能表示一个字符长度，如‘a’。为char 类型赋值要使用单引号，为String  类型对象赋值要使用双引号。

### 引用数据类型

引用数据类型有三个类、接口、数组，在后续章节会单独讲述。

## 变量

之前我们提到过，在程序当中，每一个量都有自己的存放空间，如果这个存放空间里面的值是可以变化的，我们把这个量叫做变量

变量格式：

```Java
数据类型 变量名；
```

例子：

```java
int a;
long b;
short c;
```

我们可以看到，每个声明以分号结束，变量名满足标识符命名规则

### 标识符命名规则

- 标识符可以由字母、数字、下划线（_）和美元符($）组成，不能以数字开头
- 标识符严格区分大小写
- 标识符不能是Java关键字和保留字
- 标识符的命名最好能反映出其作用

### 初始化变量

在声明一个变量之后，我们需要使用赋值语句对变量进行初始化操作。

赋值语句的使用方法是：变量名 = 表达式(值);

```java
int a;
a = 10;//a的值为10
/*也可以在变量声明时初始化(声明变量并赋值)*/
int a = 10;
double b = 10.25;
float c = 9.9f;
```

在Java中，变量的声明尽可能的靠近变量第一次使用的地方，这是一种良好的编写习惯。

## 常量

常量差距不多，但是常量的值在经过第一次赋值之后，不允许二次赋值

常量格式:

```java
final 数据类型 变量名；
```

例子：

```java
final int A;
final long B;
final short C;
```

常量同样要求满住标识符的命名规范，但在编写程序的时候，为了和变量做区分，我们通常将常量全部大写

### 类常量

在Java中，有时需要一个常量在一个类的多个方法中反复调用，通常我们将这个常量在方法外面，使用static final设置成类常量

例如

```java
public class Constants{
    public static final double p = 3.14;
    //p值为类常量
    public static void main(String[] args){
        System.out.println(p);
    }
}
```

## 运算符

计算机的最基本用途之一就是执行数学运算，作为一门计算机语言，Java也提供了一套丰富的运算符来操纵变量。我们可以把运算符分成以下几组：

### 算数运算符

假设整数变量A的值为10，变量B的值为20：

| 操作符 | 描述                              | 例子                               |
| ------ | --------------------------------- | ---------------------------------- |
| +      | 加法 - 相加运算符两侧的值         | A + B 等于 30                      |
| -      | 减法 - 左操作数减去右操作数       | A – B 等于 -10                     |
| *      | 乘法 - 相乘操作符两侧的值         | A * B等于200                       |
| /      | 除法 - 左操作数除以右操作数       | B / A等于2                         |
| ％     | 取余 - 左操作数除以右操作数的余数 | B%A等于0                           |
| ++     | 自增: 操作数的值增加1             | B++ 或 ++B 等于 21（区别详见下文） |
| --     | 自减: 操作数的值减少1             | B-- 或 --B 等于 19（区别详见下文） |

代码demo

Test.java

```java
public class Test {
  public static void main(String[] args) {
     int a = 10;
     int b = 20;
     int c = 25;
     int d = 25;
     System.out.println("a + b = " + (a + b) );
     System.out.println("a - b = " + (a - b) );
     System.out.println("a * b = " + (a * b) );
     System.out.println("b / a = " + (b / a) );
     System.out.println("b % a = " + (b % a) );
     System.out.println("c % a = " + (c % a) );
     System.out.println("a++   = " +  (a++) );
     System.out.println("a--   = " +  (a--) );
     // 查看  d++ 与 ++d 的不同
     System.out.println("d++   = " +  (d++) );
     System.out.println("++d   = " +  (++d) );
  }
}
```

运算结果

```java
进行自增运算后的值等于4
进行自减运算后的值等于2
```

#### 自增自减运算符

自增（++）自减（--）运算符是一种特殊的算术运算符，在算术运算符中需要两个操作数来进行运算，而自增自减运算符是一个操作数。

前缀自增自减法(++a,--a):先进行自增或者自减运算，再进行表达式运算。

后缀自增自减法(a++,a--): 先进行表达式运算，再进行自增或者自减运算。

代码demo

selfAddMinus.java

```Java
public class selfAddMinus{
    public static void main(String[] args){
        int a = 5;//定义一个变量；
        int b = 5;
        int x = 2*++a;
        int y = 2*b++;
        System.out.println("自增运算符前缀运算后a="+a+",x="+x);
        System.out.println("自增运算符后缀运算后b="+b+",y="+y);
    }
}
```

运算结果

```java
自增运算符前缀运算后a=6，x=12
自增运算符后缀运算后b=6，y=10
```

### 关系运算符

下表为Java支持的关系运算符,表格中的实例整数变量A的值为10，变量B的值为20：

| 运算符 | 描述                                                         | 例子          |
| ------ | ------------------------------------------------------------ | :------------ |
| ==     | 检查如果两个操作数的值是否相等，如果相等则条件为真。         | （A==B)为假。 |
| !=     | 检查如果两个操作数的值是否相等，如果值不相等则条件为真。     | (A!=B)为真。  |
| >      | 检查左操作数的值是否大于右操作数的值，如果是那么条件为真。   | （A>B)为假。  |
| <      | 检查左操作数的值是否小于右操作数的值，如果是那么条件为真。   | （A<B)为真。  |
| >=     | 检查左操作数的值是否大于或等于右操作数的值，如果是那么条件为真。 | （A>=B)为假。 |
| <=     | 检查左操作数的值是否小于或等于右操作数的值，如果是那么条件为真。 | （A<=B)为真。 |

代码demo

Test.java

```java
public class Test {
  public static void main(String[] args) {
     int a = 10;
     int b = 20;
     System.out.println("a == b = " + (a == b) );
     System.out.println("a != b = " + (a != b) );
     System.out.println("a > b = " + (a > b) );
     System.out.println("a < b = " + (a < b) );
     System.out.println("b >= a = " + (b >= a) );
     System.out.println("b <= a = " + (b <= a) );
  }
}
```

运算结果

```java
a == b = false
a != b = true
a > b = false
a < b = true
b >= a = true
b <= a = false
```

### 位运算符

Java定义了位运算符，应用于整数类型(int)，长整型(long)，短整型(short)，字符型(char)，和字节型(byte)等类型。位运算符作用在所有的位上，并且按位运算。假设a = 60，b = 13;它们的二进制格式表示将如下：

```java
A = 0011 1100
B = 0000 1101
-----------------
A&B = 0000 1100
A | B = 0011 1101
A ^ B = 0011 0001
~A= 1100 0011
```

下表列出了位运算符的基本运算，假设整数变量 A 的值为 60 和变量 B 的值为 13：

| 操作符 | 描述                                                         | 例子                           |
| ------ | ------------------------------------------------------------ | ------------------------------ |
| ＆     | 如果相对应位都是1，则结果为1，否则为0                        | （A＆B），得到12，即0000 1100  |
| \|     | 如果相对应位都是 0，则结果为 0，否则为 1                     | （A \| B）得到61，即 0011 1101 |
| ^      | 如果相对应位值相同，则结果为0，否则为1                       | （A ^ B）得到49，即 0011 0001  |
| 〜     | 按位取反运算符翻转操作数的每一位，即0变成1，1变成0。         | （〜A）得到-61，即1100 0011    |
| <<     | 按位左移运算符。左操作数按位左移右操作数指定的位数。         | A << 2得到240，即 1111 0000    |
| >>     | 按位右移运算符。左操作数按位右移右操作数指定的位数。         | A >> 2得到15即 1111            |
| >>>    | 按位右移补零操作符。左操作数的值按右操作数指定的位数右移，移动得到的空位以零填充。 | A>>>2得到15即0000 1111         |

代码demo

Test.java

```Java
public class Test {
  public static void main(String[] args) {
     int a = 60; /* 60 = 0011 1100 */ 
     int b = 13; /* 13 = 0000 1101 */
     int c = 0;
     c = a & b;       /* 12 = 0000 1100 */
     System.out.println("a & b = " + c );
     c = a | b;       /* 61 = 0011 1101 */
     System.out.println("a | b = " + c );
     c = a ^ b;       /* 49 = 0011 0001 */
     System.out.println("a ^ b = " + c );
     c = ~a;          /*-61 = 1100 0011 */
     System.out.println("~a = " + c );
     c = a << 2;     /* 240 = 1111 0000 */
     System.out.println("a << 2 = " + c );
     c = a >> 2;     /* 15 = 1111 */
     System.out.println("a >> 2  = " + c );
     c = a >>> 2;     /* 15 = 0000 1111 */
     System.out.println("a >>> 2 = " + c );
  }
} 
```

运算结果

```java
a & b = 12
a | b = 61
a ^ b = 49
~a = -61
a << 2 = 240
a >> 2  = 15
a >>> 2 = 15
```

### 逻辑运算符

下表列出了逻辑运算符的基本运算，假设布尔变量A为真，变量B为假

| 操作符 | 描述                                                         | 例子              |
| ------ | ------------------------------------------------------------ | ----------------- |
| &&     | 称为逻辑与运算符。当且仅当两个操作数都为真，条件才为真。     | (A && B)为假。    |
| \| \|  | 称为逻辑或操作符。如果任何两个操作数任何一个为真，条件为真。 | (A \| \| B)为真。 |
| ！     | 称为逻辑非运算符。用来反转操作数的逻辑状态。如果条件为true，则逻辑非运算符将得到false。 | !(A && B)为真。   |

代码demo

Test.java

```java
public class Test {
  public static void main(String[] args) {
     boolean a = true;
     boolean b = false;
     System.out.println("a && b = " + (a&&b));
     System.out.println("a || b = " + (a||b) );
     System.out.println("!(a && b) = " + !(a && b));
  }
}
```

运算结果

```java
a && b = false
a || b = true
!(a && b) = true
```

#### 短路逻辑运算符

当使用与逻辑运算符时，在两个操作数都为true时，结果才为true，但是当得到第一个操作为false时，其结果就必定是false，这时候就不会再判断第二个操作了。

代码demo

Test.java

```java
public class LuoJi{
    public static void main(String[] args){
        int a = 5;//定义一个变量；
        boolean b = (a<4)&&(a++<10);
        System.out.println("使用短路逻辑运算符的结果为"+b);
        System.out.println("a的结果为"+a);
    }
}
```

运算结果

```java
使用短路逻辑运算符的结果为false
a的结果为5
```

**解析：** 该程序使用到了短路逻辑运算符(&&)，首先判断 a<4 的结果为 false，则 b 的结果必定是 false，所以不再执行第二个操作 a++<10 的判断，所以 a 的值为 5。

### 赋值运算符

下面是Java语言支持的赋值运算符：

| 操作符 | 描述                                                        | 例子                               |
| ------ | ----------------------------------------------------------- | ---------------------------------- |
| =      | 简单的赋值运算符，将右操作数的值赋给左侧操作数              | C = A + B将把A + B得到的值赋给C    |
| + =    | 加和赋值操作符，它把左操作数和右操作数相加赋值给左操作数    | C + = A等价于C = C + A             |
| - =    | 减和赋值操作符，它把左操作数和右操作数相减赋值给左操作数    | C - = A等价于C = C - A             |
| * =    | 乘和赋值操作符，它把左操作数和右操作数相乘赋值给左操作数    | C * = A等价于C = C * A             |
| / =    | 除和赋值操作符，它把左操作数和右操作数相除赋值给左操作数    | C/= A,C与A同类型时等价于 C = C / A |
| (％)=  | 取模和赋值操作符,它把左操作数和右操作数取模后赋值给左操作数 | C％= A等价于C = C％A               |
| <<=    | 左移位赋值运算符                                            | C << = 2等价于C = C << 2           |
| >>=    | 右移位赋值运算符                                            | C >> = 2等价于C = C >> 2           |
| ＆=    | 按位与赋值运算符                                            | C＆= 2等价于C = C＆2               |
| ^=     | 按位异或赋值操作符                                          | C ^ = 2等价于C = C ^ 2             |
| \| =   | 按位或赋值操作符                                            | C \| = 2等价于C = C \| 2           |

代码demo

Test.java

```java
public class Test {
    public static void main(String[] args) {
        int a = 10;
        int b = 20;
        int c = 0;
        c = a + b;
        System.out.println("c = a + b = " + c );
        c += a ;
        System.out.println("c += a  = " + c );
        c -= a ;
        System.out.println("c -= a = " + c );
        c *= a ;
        System.out.println("c *= a = " + c );
        a = 10;
        c = 15;
        c /= a ;
        System.out.println("c /= a = " + c );
        a = 10;
        c = 15;
        c %= a ;
        System.out.println("c %= a  = " + c );
        c <<= 2 ;
        System.out.println("c <<= 2 = " + c );
        c >>= 2 ;
        System.out.println("c >>= 2 = " + c );
        c >>= 2 ;
        System.out.println("c >>= 2 = " + c );
        c &= a ;
        System.out.println("c &= a  = " + c );
        c ^= a ;
        System.out.println("c ^= a   = " + c );
        c |= a ;
        System.out.println("c |= a   = " + c );
    }
}
```

运算结果

```java
c = a + b = 30
c += a = 40
c -= a = 30
c *= a = 300
c /= a = 1
c %= a  = 5
c <<= 2 = 20
c >>= 2 = 5
c >>= 2 = 1
c &= a = 0
c ^= a = 10
c |= a = 10
```

### 条件运算符

条件运算符也被称为三元运算符。该运算符有3个操作数，并且需要判断布尔表达式的值。该运算符的主要是决定哪个值应该赋值给变量。

```java
variable x = (expression) ? value if true : value if false
```

代码demo

Test.java

```java
public class Test {
   public static void main(String[] args){
      int a , b;
      a = 10;
      // 如果 a 等于 1 成立，则设置 b 为 20，否则为 30
      b = (a == 1) ? 20 : 30;
      System.out.println( "Value of b is : " +  b );
      // 如果 a 等于 10 成立，则设置 b 为 20，否则为 30
      b = (a == 10) ? 20 : 30;
      System.out.println( "Value of b is : " + b );
   }
}
```

运算结果

```java
Value of b is : 30
Value of b is : 20
```

### instanceof 运算符

该运算符用于操作对象实例，检查该对象是否是一个特定类型（类类型或接口类型）。

instanceof运算符使用格式如下：

```java
( Object reference variable ) instanceof  (class/interface type)
```

如果运算符左侧变量所指的对象，是操作符右侧类或接口(class/interface)的一个对象，那么结果为真。

下面是一个例子：

```java
String name = "James";
boolean result = name instanceof String; // 由于 name 是 String 类型，所以返回真
```

如果被比较的对象兼容于右侧类型,该运算符仍然返回true。

看下面的例子：

```java
class Vehicle {}
public class Car extends Vehicle {
   public static void main(String[] args){
      Vehicle a = new Car();
      boolean result =  a instanceof Car;
      System.out.println( result);
   }
}
```

运算结果

```
true
```

### Java运算符优先级

当多个运算符出现在一个表达式中，谁先谁后呢？这就涉及到运算符的优先级别的问题。在一个多运算符的表达式中，运算符优先级不同会导致最后得出的结果差别甚大。

例如，（1+3）＋（3+2）*2，这个表达式如果按加号最优先计算，答案就是 18，如果按照乘号最优先，答案则是 14。

再如，x = 7 + 3 * 2;这里x得到13，而不是20，因为乘法运算符比加法运算符有较高的优先级，所以先计算3 * 2得到6，然后再加7。

下表中具有最高优先级的运算符在的表的最上面，最低优先级的在表的底部。

| 类别     | 操作符                                     | 关联性   |
| -------- | ------------------------------------------ | -------- |
| 后缀     | () [] . (点操作符)                         | 左到右   |
| 一元     | + + - ！〜                                 | 从右到左 |
| 乘性     | * /％                                      | 左到右   |
| 加性     | + -                                        | 左到右   |
| 移位     | >> >>>  <<                                 | 左到右   |
| 关系     | >> = << =                                  | 左到右   |
| 相等     | == !=                                      | 左到右   |
| 按位与   | ＆                                         | 左到右   |
| 按位异或 | ^                                          | 左到右   |
| 按位或   | \|                                         | 左到右   |
| 逻辑与   | &&                                         | 左到右   |
| 逻辑或   | \| \|                                      | 左到右   |
| 条件     | ？：                                       | 从右到左 |
| 赋值     | = + = - = * = / =％= >> = << =＆= ^ = \| = | 从右到左 |
| 逗号     | ，                                         | 左到右   |

## 数据类型转换

在程序中，我们经常需要将一种数值类型转换为另一种数值类型来进行应用

类型转换分为自动类型转换和强制类型转换

### 自动类型转换(隐式转换)

在运算中，指的是小空间数据类型转向大空间数据类型。

![image-20200214155102776](JavaseBasics2.assets/image-20200214155102776.png)

由于小空间的数值本身就小于大空间，小物品放在大物品里，不会发生任何的变化

```Java
int a;
short b = 10;
a = b;
```

### 强制类型转换

而强制类型转换就恰恰相反，通常用于，把大空间的值放到小空间里，那么就可能存在小空间放不下的情况，所以小空间会把放不下的那部分给丢掉

```Java
double d＝123.4;
float f=(float)d;
```

