# Unicode和char类型

> 来源：Java核心技术卷I(原书第十版) 35页

要想弄清char类型,就必须了解 Unicode编码机制。 Unicode打破了传统字符编码机制的限制。在 Unicode出现之前,已经有许多种不同的标准:美国的ASCII、西欧语言中的ISO8859-1、俄罗斯的KOI-8、中国的GB18030和BIG-5等。这样就产生了下面两个问题:一个是对于任意给定的代码值,在不同的编码方案下有可能对应不同的字母;二是采用大字符集的语言其编码长度有可能不同。例如有些常用的字符采用单字节编码,而另一些字符则需要两个或更多个字节。

设计Unicode编码的目的就是要解决这些问题。在20世纪80年代开始启动设计工作时,人们认为两个字节的代码宽度足以对世界上各种语言的所有字符进行编码,并有足够的空间留给未来的扩展。在1991年发布了Unicode1.0,当时仅占用65536个代码值中不到一半的
部分。在设计Java时决定采用16位的Unicode字符集,这样会比使用8位字符集的程序设计语言有很大的改进。

十分遗憾,经过一段时间,不可避免的事情发生了。Unicode字符超过了65536个,其主要原因是增加了大量的汉语、日语和韩语中的表意文字。现在,16位的char类型已经不能满足描述所有 Unicode字符的需要了。

下面利用一些专用术语解释一下Java语言解决这个问题的基本方法。从 Java SE5.0开始。码点( code point)是指与一个编码表中的某个字符对应的代码值。在 Unicode标准中,码点采用十六进制书写,并加上前缀U+,例如U+0041就是拉丁字母A的码点。 Unicode的
点可以分成17个代码级别(code plane)。第一个代码级别称为基本的多语言级别(basic multilingual plane),码点从U+0000到U+FFFF,其中包括经典的 Unicode代码;其余的16个级别码点从U+10000到U+10FFFF,其中包括一些辅助字符( supplementary character).
UTF-16编码采用不同长度的编码表示所有 Unicode码点。在基本的多语言级别中,每个字符用16位表示,通常被称为代码单元( code unit);而辅助字符采用一对连续的代码单元进行编码。这样构成的编码值落入基本的多语言级别中空闲的2048字节内,通常被称为替
代区域(surr0gafe area)这样设计十分巧妙,我们可以从中迅速地知道一个代码单元是一个字符的编码,还是一个辅助字符的第一或第二部分。(关于编码算法的具体描述见http://en.wikipedia.org/wiki/UTF-16)

在Java中,char类型描述了UTF-16编码中的一个代码单元。
我们强烈建议不要在程序中使用char类型,除非确实需要处理UTF-16代码单元。最好将字符串作为抽象数据类型处理.